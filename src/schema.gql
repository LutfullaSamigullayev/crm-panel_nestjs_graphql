# ------------------------------------------------------
# THIS FILE WAS AUTOMATICALLY GENERATED (DO NOT MODIFY)
# ------------------------------------------------------

type Auth {
  id: Int!
  login: String!
  password: String!
  profession: GroupEnum
  role: UserRole!
  img_url: String!
  joined_at: DateTime!
  update_at: DateTime!
}

enum GroupEnum {
  BACKEND
  FRONTEND
  DESIGN
  SMM
}

enum UserRole {
  ADMIN
  USER
  SUPER_ADMIN
  TEACHER
}

"""
A date-time string at UTC, such as 2019-12-03T09:54:33Z, compliant with the date-time format.
"""
scalar DateTime

type Group {
  id: Int!
  profession: GroupEnum!
  group_name: String!
  teacher: Auth
  students: [Student!]
}

type Student {
  id: Int!
  full_name: String!
  phone_number: String!
  profession: String!
  parent_name: String!
  parent_number: String!
  img_url: String!
  group: Group
  joined_at: DateTime!
  left_at: DateTime
}

type StudentStatistics {
  month: DateTime!
  total_joined: Int!
  total_left: Int!
}

type AuthResponse {
  token: String!
  user: Auth!
}

type Bot {
  id: ID!
  first_name: String!
  phone_number: String
  message: String!
  createdAt: DateTime!
}

type AttendanceStudent {
  id: Int!
  student: Student!
  is_present: Boolean!
}

type Attendance {
  id: Int!
  group: Group!
  date: DateTime!
  students: [AttendanceStudent!]!
}

type Query {
  getStudents(page: Int, limit: Int, search: String): Student!
  getStudentStatistics: [StudentStatistics!]!
  findOne(id: Int!): Student!
  group(id: Int!): Group!
  getMessagesFromToday: [Bot!]!
  getMessagesFromLastTenDays: [Bot!]!
  attendanceByGroup(groupId: Int!): [Attendance!]!
}

type Mutation {
  createUser(createUserInput: CreateUserInput!): Auth!
  login(loginInput: LoginInput!): AuthResponse!
  createStudent(createStudentInput: CreateStudentInput!): Student!
  updateStudent(updateStudentInput: UpdateStudentInput!): Student!
  leaveStudent(id: Int!): Student!
  removeStudent(id: Int!): Student!
  createGroup(createGroupInput: CreateGroupInput!): Group!
  updateGroup(updateGroupInput: UpdateGroupInput!): Group!
  removeGroup(id: Int!): Group!
  createAttendance(createAttendanceInput: CreateAttendanceInput!): Attendance!
}

input CreateUserInput {
  login: String!
  password: String!
  teacherProfession: GroupEnum
  role: UserRole = USER
  img_url: String!
}

input LoginInput {
  login: String!
  password: String!
}

input CreateStudentInput {
  full_name: String!
  phone_number: String!
  profession: String!
  parent_name: String!
  parent_number: String!
  img_url: String!
}

input UpdateStudentInput {
  full_name: String
  phone_number: String
  profession: String
  parent_name: String
  parent_number: String
  img_url: String
  id: Int!
}

input CreateGroupInput {
  profession: GroupEnum!
  group_name: String!
  teacherId: Int
}

input UpdateGroupInput {
  profession: GroupEnum
  group_name: String
  teacherId: Int
  id: Int!
}

input CreateAttendanceInput {
  groupId: Int!
  date: DateTime!
  students: [AttendanceStudentInput!]!
}

input AttendanceStudentInput {
  studentId: Int!
  is_present: Boolean!
}